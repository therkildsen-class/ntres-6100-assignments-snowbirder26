---
title: "lab5"
format: gfm
editor: visual
---

### Load packages and read in data

```{r, output=FALSE}
# Load required packages
library(tidyverse)
library(knitr)

# Read in the data
titanic <- read_csv("https://raw.githubusercontent.com/nt246/NTRES-6100-data-science/master/datasets/Titanic.csv")
```

And take a look at the dataset...

```{r, echo=FALSE}
# Let's look at the top 5 lines of the dataset
head(titanic, n = 5) |>
  kable()
```

```{r, output=FALSE}
View(titanic)
dim(titanic)
colnames(titanic)
```

<br>

<br>

## Exercise 1

<br>

### There were \~2224 people on board â€” how many do we have information for in this dataset?

```{r, output=FALSE}
titanic |> 
  dim()
```

We have data for 891 passengers

<br>

### How many survived and how many did not? 

```{r output=FALSE}
titanic |> 
  filter(Survived == 1) |> 
  dim() # 342 survivors

titanic |> 
  filter(Survived == 0) |> 
  dim() # 549 did not survive
```

Survivors: 342

Non-survivors: 549

<br>

### What is the overall survival rate?

```{r}
survivors <- titanic |> 
  filter(Survived==1) |> 
  nrow()

total <- titanic |> 
  nrow()

survival_rate <- survivors/total
```

Survival rate is about 38.38%

<br>

<br>

### How many males and females?

```{r, output=FALSE}
titanic |> 
  filter(Sex=="female") |> 
  nrow() # 314 female passengers

titanic |> 
  filter(Sex=="male") |> 
  nrow() # 577 male passengers
```

Female: 314

Male: 577

<br>

### Break it down by ticket class?

```{r, echo=FALSE}
titanic |> 
  group_by(Sex) |> 
  ggplot() + 
  geom_bar(aes(x=Sex)) +
  facet_wrap(~Pclass)
```

More males than females in every class, but especially disproportionate in the class 3 group

<br>

<br>

### How many passengers of each sex survived? How many did not? What is the survival rate for each sex?

```{r, echo=FALSE}
titanic |> 
  group_by(Survived) |> 
  ggplot(aes(x=as.factor(Survived))) +
  geom_bar() +
  geom_text(stat='count', aes(label=..count..), vjust=-1)+
  facet_wrap(~Sex)
```

Female: 233 survived, 81 did not

Male: 109 survived, 468 did not

<br>

```{r, output=FALSE}
male_survivors <- titanic |> 
  filter(Sex=="male") |> 
  filter(Survived==1) |> 
  nrow()

total_males <- titanic |> 
  filter(Sex=="male") |> 
  nrow()

male_survival_rate <- male_survivors/total_males # 18.89% survival
```

```{r, output=FALSE}
female_survivors <- titanic |> 
  filter(Sex=="female") |> 
  filter(Survived==1) |> 
  nrow()

total_females <- titanic |> 
  filter(Sex=="female") |> 
  nrow()

female_survival_rate <- female_survivors/total_females # 74.2% survival
```

Male survival rate is 18.89%

Female survival rate is 74.2%

<br>

<br>

### For how many passengers do we have age information (including estimated age)? For how many is the age information missing? What is the age distribution for passengers whose age information is available?

```{r}
ppl_w_age_data <- titanic |> 
  filter(Age>0) |> 
  nrow()

total_ppl <- titanic |> 
  nrow()

ppl_wo_age_data <- total_ppl-ppl_w_age_data
```

We have age information for 714 passengers, and we do not have it for 177 passengers

<br>
